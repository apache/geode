cmake_minimum_required( VERSION 3.3 )
project( perl-Devel-GDB )

set( ${PROJECT_NAME}_VERSION 2.02 )
set( ${PROJECT_NAME}_SHA265 9c85c92b19a8aefc4264f24ea18a6b1c25b49324cc4211bfff1ccdbbdba614ee )
set( ${PROJECT_NAME}_URL http://search.cpan.org/CPAN/authors/id/J/JE/JEZRA/Devel-GDB-${${PROJECT_NAME}_VERSION}.tar.gz )

set ( ${PROJECT_NAME}_CFLAGS "${${PROJECT_NAME}_CFLAGS} ${CFLAGS_ARCH}" )

include(ExternalProject)

ExternalProject_Add( ${PROJECT_NAME}
   URL ${${PROJECT_NAME}_URL}
   URL_HASH SHA256=${${PROJECT_NAME}_SHA265}
   UPDATE_COMMAND ""
   BUILD_IN_SOURCE 1
   CONFIGURE_COMMAND perl Makefile.PL PREFIX=<INSTALL_DIR>
   BUILD_COMMAND $(MAKE) all
   INSTALL_COMMAND ""
   #INSTALL_COMMAND $(MAKE) install
   #TODO TEST_COMMAND $(MAKE) test
)

ExternalProject_Get_Property( ${PROJECT_NAME} SOURCE_DIR )
set( ${PROJECT_NAME}_SOURCE_DIR ${SOURCE_DIR} )
ExternalProject_Get_Property( ${PROJECT_NAME} INSTALL_DIR )
set( ${PROJECT_NAME}_INSTALL_DIR ${INSTALL_DIR} )

set( DEPENDENCIES_${PROJECT_NAME}_DIR ${${PROJECT_NAME}_SOURCE_DIR} PARENT_SCOPE)
set( DEPENDENCIES_${PROJECT_NAME}_VERSION ${${PROJECT_NAME}_VERSION} PARENT_SCOPE)
